<html>
    <head>
        <title>SistemaVictoria || Presupuestos</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="../../../css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"/>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="../../../css/estilos.css" rel="stylesheet" type="text/css"/>
        <link rel="icon" type="image/png" href="../../../img/por8.jpg"/>
    </head>
    <body style="background: url(../../../img/por8.jpg); background-repeat: no-repeat; background-position: center;">
        <!--SUBDETALLES-->
        <div id="panelLinea1" class="panel panel-primary">
            <div class="panel-heading centrado">SubDetalles Presupuesto</div>
            <div class="panel-body">
                <form id="formLinea1">
                    <div class="row">
                        <div class="col-md-1">
                            <span><b>Id Linea</b></span>
                        </div>
                        <div class="col-md-1">
                            <input id="id_presupuestosubdetalle" name="id_presupuestosubdetalle" type="text" class="form-control imput-sm" placeholder="Id" readonly="readonly">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-1">
                            <span><b>Medidas</b></span>
                        </div>
                    </div>
                    <div class="row">
                        <!--CAMPO DE MEDIDAS-->
                        <div class="col-md-1"></div>
                        <div class="col-md-1">
                            <span>Ancho</span>
                        </div>
                        <div class="col-md-2">
                            <input id="ancho_presupuestodetalle1" name="ancho_presupuestodetalle1" type="text" class="form-control input-sm" placeholder="Ancho" value=0 onchange="Area();" readonly="readonly">
                        </div>
                    </div>
                    <div class="row">
                        <!--CAMPO DE MEDIDAS-->
                        <div class="col-md-1"></div>
                        <div class="col-sm-1">
                            <span>Alto</span>
                        </div>
                        <div class="col-md-2">
                            <input id="alto_presupuestodetalle1" name="alto_presupuestodetalle1" type="text" class="form-control input-sm" placeholder="Alto" value=0 onchange="Area();" readonly="readonly">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <!--CAMPO DE MEDIDAS-->
                        <div class="col-md-1"></div>
                        <div class="col-md-1">
                            <span>Metro Cuadrado</span>
                        </div>
                        <div class="col-md-2">
                            <input id="m2_presupuestodetalle1" name="m2_presupuestodetalle1" type="text" class="form-control input-sm" placeholder="Metro cuadrado" readonly="readonly" onchange="Vidrio(); Mo();">
                        </div>
                    </div>
                    <br>
                    <!--TITULOS-->
                    <div class="row">
                        <div class="col-md-1">
                            <span><b>Vidrio</b></span>
                        </div>
                        <div class="col-md-4"></div>
                        <div class="col-md-1">
                            <span><b>Perfiles</b></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-1"></div>
                        <div class="col-md-1">
                            <span>Precio</span>
                        </div>
                        <div class="col-md-2">
                            <input id="costovidrio_presupuestosubdetalle" name="costovidrio_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Gs." value="0" onchange="Vidrio();">
                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-2">
                            <span>Precio de Ancho</span>
                        </div>
                        <div class="col-md-2">
                            <input id="anchop_presupuestosubdetalle" name="anchop_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Gs." value=0 onchange="Perfil(); formatoMiles();" >
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-1"></div>
                        <div class="col-md-1">
                            <span>Precio Total</span>
                        </div>
                        <div class="col-md-2">
                            <input id="totalvidrio_presupuestosubdetalle" name="totalvidrio_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Gs." readonly="readonly" onchange="TotalSub();">
                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-2">
                            <span>Precio de Largo</span>
                        </div>
                        <div class="col-md-2">
                            <input id="largop_presupuestosubdetalle" name="largop_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Gs." value=0 onchange="Perfil();formatoMiles();">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6"></div>
                        <div class="col-md-2">
                            <span>Precio Total</span>
                        </div>
                        <div class="col-md-2">
                            <input id="totalperfil_presupuestosubdetalle" name="totalperfil_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Total de Perfil" readonly="readonly" onchange="TotalSub(); formatoMiles();">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <span><b>Mano De Obra</b></span>
                        </div>
                        <div class="col-md-3"></div>
                        <div class="col-md-2">
                            <span><b>Herrajes</b></span>
                        </div>
                    </div>
                    <div class="row">
                        <!--CAMPO MANO DE OBRAS-->
                        <div class="col-md-1"></div>
                        <div class="col-md-2">
                            <span>Precio de M.O</span>
                        </div>
                        <div class="col-md-2">
                            <input id="moo_presupuestosubdetalle" name="moo_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Gs." onchange="Mo();"> 
                        </div>
                        <!--CAMPO DE PERFILES-->
                        <div class="col-md-2"></div>
                        <div class="col-md-1">
                            <span>Precio</span>
                        </div>
                        <div class="col-md-2">
                            <input id="costoherrajes_presupuestosubdetalle" name="costoherrajes_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Gs." onchange="TotalSub();">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-1"></div>
                        <div class="col-md-2">
                            <span>Precio Total</span>
                        </div>
                        <div class="col-md-2">
                            <input id="mo_presupuestosubdetalle" name="mo_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Gs." onchange="TotalSub();" readonly="readonly"> 
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-3"></div>
                        <div class="col-md-1">
                            <span><b>Cantidad</b></span>
                        </div>
                        <div class="col-md-1">
                            <input id="cantidad_presupuestodetalle1" name="cantidad_presupuestodetalle1" type="text" class="form-control input-sm" placeholder="Cantidad" readonly="readonly" onchange="Vidrio(); Mo(); TotalSub();">
                        </div>
                        <div class="col-md-1"></div>
                        <div class="col-md-3">
                            <span><b>Precio De Colocación</b></span>
                        </div>
                        <div class="col-md-2">
                            <input id="colocacion_presupuestosubdetalle" name="colocacion_presupuestosubdetalle" type="text" class="form-control input-sm" placeholder="Precio" readonly="readonly">
                        </div>
                    </div>
                </form>
            </div>
            <!--PANEL DE BOTONES-->
            <div class="panel-footer centrado">
                <button id="botonAgregarLinea1" type="button" class="btn btn-primary btn-sm">Agregar</button>
                <button id="botonModificarLinea1" type="button" class="btn btn-primary btn-sm">Modificar</button>
                <button id="BotonEliminarLinea1" type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#confirmarEliminarLinea1">Eliminar</button>
                <button id="botonSalirLinea1" type="button" class="btn btn-primary btn-sm">Salir</button>
            </div>
        </div>

        <div id="confirmar"></div>
        <div id="buscar"></div>
        <div id="panelLinea" class="panel panel-primary">
            <div class="panel-heading centrado">Detalles Presupuesto</div>
            <!-- DETALLES PRESUPUESTOS -->
            <div class="panel-body">
                <form id="formLinea">
                    <div class="row">
                        <div class="col-md-1">
                            <span><b>Id Línea</b></span>
                        </div>
                        <div class="col-md-1">
                            <input id="id_presupuestodetalle" name="id_presupuestodetalle" type="text" class="form-control imput-sm" placeholder="Id" readonly="readonly">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-1">
                            <span><b>Detalle</b></span>
                        </div>
                        <div class="col-md-8">
                            <input id="detalle_presupuestodetalle" name="detalle_presupuestodetalle" type="text" class="form-control imput-sm" placeholder="Detalle">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-1">
                            <span><b>Medidas</b></span>
                        </div>
                    </div>
                    <div class="row">
                        <!--CAMPO DE MEDIDAS-->
                        <div class="col-md-1"></div>
                        <div class="col-md-1">
                            <span>Ancho</span>
                        </div>
                        <div class="col-md-2">
                            <input id="ancho_presupuestodetalle" name="ancho_presupuestodetalle" type="text" class="form-control input-sm" placeholder="Ancho" value=0 onchange="Area();">
                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-1">
                            <span>Ubicacion</span>
                        </div>
                        <div class="col-md-1">
                            <input id="id_ubicacion" name="id_ubicacion" type="text" class="form-control imput-sm" placeholder="Id" onkeypress="return SoloNumeros(event)">
                        </div>
                        <div class="col-md-1">
                            <button id="botonBuscarIdUbicacion" type="button" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-search"></span></button>
                        </div>
                        <div class="col-md-2">
                            <input id="nombre_ubicacion" name="nombre_ubicacion" type="text" class="form-control input-sm" placeholder="Ubicación" readonly="readonly">
                        </div>

                    </div>
                    <div class="row">
                        <!--CAMPO DE MEDIDAS-->
                        <div class="col-md-1"></div>
                        <div class="col-sm-1">
                            <span>Alto</span>
                        </div>
                        <div class="col-md-2">
                            <input id="alto_presupuestodetalle" name="alto_presupuestodetalle" type="text" class="form-control input-sm" placeholder="Alto" value=0 onchange="Area();">
                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-1">
                            <span>Sector</span>
                        </div>
                        <div class="col-md-1">
                            <input id="id_sector" name="id_sector" type="text" class="form-control imput-sm" placeholder="Id" onkeypress="return SoloNumeros(event)">
                        </div>
                        <div class="col-md-1">
                            <button id="botonBuscarIdSector" type="button" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-search"></span></button>
                        </div>
                        <div class="col-md-2">
                            <input id="nombre_sector" name="nombre_sector" type="text" class="form-control imput-sm" placeholder="Sector" readonly="readonly" onkeypress="return soloLetras(event)">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <!--CAMPO DE MEDIDAS-->
                        <div class="col-md-1"></div>
                        <div class="col-md-2">
                            <span>Metro Cuadrado</span>
                        </div>
                        <div class="col-md-2">
                            <input id="m2_presupuestodetalle" name="m2_presupuestodetalle" type="text" class="form-control input-sm" placeholder="Metro cuadrado" readonly="readonly" onchange="Vidrio(); Mo();">
                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-1">
                            <span><b>Color</b></span>
                        </div>
                        <div class="col-md-2">
                            <input id="color_presupuestodetalle" name="color_presupuestodetalle" type="text" class="form-control input-sm" placeholder="Color" onkeypress="return soloLetras(event)">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6"></div>
                        <div class="col-md-1">
                            <span>Milímetro</span>
                        </div>
                        <div class="col-md-1">
                            <input id="mm_presupuestodetalle" name="mm_presupuestodetalle" type="text" class="form-control input-sm" placeholder="MM">
                        </div>
                    </div>
                    <br>        
                    <div class="row">
                        <div class="col-md-1">
                            <span>Cantidad</span>
                        </div>
                        <div class="col-md-2">
                            <input id="cantidad_presupuestodetalle" name="cantidad_presupuestodetalle" type="text" class="form-control input-sm" placeholder="Cantidad" value=0 onchange="TotalPresupuesto" onkeypress="return soloNumeros(event)">
                        </div>
                    </div>
                    <br>       
                    <div class="row">
                        <div class="col-md-1">
                            <span>Precio</span>
                        </div>
                        <div class="col-md-2">
                            <input id="precio_presupuestodetalle" name="precio_presupuestodetalle" type="text" class="form-control input-sm" placeholder="Precio" onkeypress="return soloNumeros(event)">
                        </div>
                    </div>
                </form>
                <div id="detalle1" hidden="">
                    <table class="table table-bordered table-striped table-hover">
                        <thead>
                        <th class="centrado" colspan=8 style="background: #fff">SubDetalle</th>
                        <tr>
                            <th class="centrado" style="background: #fff">Id</th>
                            <th class="centrado" style="background: #fff">Vidrio</th>
                            <th class="centrado" style="background: #fff">Perfiles</th>
                            <th class="centrado" style="background: #fff">Herrajes</th>
                            <th class="centrado" style="background: #fff">Mano de Obra</th>
                            <th class="centrado" style="background: #fff">Colocación</th>
                            <th class="centrado" style="background: #fff"><button onclick="agregarLinea1()" type="button" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-plus"></span></button></th>
                        </tr>
                        </thead>
                        <tbody id="contenidoDetalle1" style="background: #fff">
                        </tbody>
                    </table>
                </div>
            </div>    
            <!--PANEL DE BOTONES-->
            <div class="panel-footer centrado">
                <button id="botonAgregarLinea" type="button" class="btn btn-primary btn-sm">Agregar</button>
                <button id="botonModificarLinea" type="button" class="btn btn-primary btn-sm">Modificar</button>
                <button id="BotonEliminarLinea" type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#confirmarEliminarLinea">Eliminar</button>
                <button id="botonSalirLinea" type="button" class="btn btn-primary btn-sm">Salir</button>
            </div>
        </div>

        <!--PRESUPUESTOS-->
        <div id="panelPrograma" class="panel panel-primary">
            <div class="panel-heading centrado">Presupuestos<span id="susuario_usuario"></span></div>
            <div class="panel-body">
                <form id="formPrograma">
                    <div class="row">
                        <div class="col-md-2">
                            <span><b>Id Presupuesto</b></span>
                        </div>
                        <div class="col-md-1">
                            <input id="id_presupuesto" name="id_presupuesto" type="text" class="form-control imput-sm" placeholder="Id" onkeypress="return soloNumeros(event)">
                        </div>
                        <div class="col-md-1">
                            <button id="botonBuscarIdPresupuesto" type="button" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-search"></span></button>
                        </div>
                        <div class="col-md-3"></div>
                        <div class="col-md-1">
                            <span><b>Fecha</b></span>
                        </div>
                        <div class="col-md-3">
                            <input id="fecha_presupuesto" name="fecha_presupuesto" type="date" class="form-control input-sm" onkeyup="this.value = this.value.toUpperCase()"> 
                        </div>

                    </div>
                    
                    <br>
                    <div class="row">
                        <div class="col-md-1">
                            <span><b>Cliente</b></span>
                        </div>
                        <div class="col-md-1">
                            <input id="id_cliente" name="id_cliente" type="text" class="form-control imput-sm" placeholder="Id" onkeypress="return soloNumeros(event)">
                        </div>
                        <div class="col-md-1">
                            <button id="botonBuscarIdCliente" type="button" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-search"></span></button>
                        </div>
                        <div class="col-md-2">
                            <span><b>Nombres</b></span>
                            <input id="nombre_cliente" name="nombre_cliente" type="text" class="form-control input-sm" placeholder="Nombres" readonly="readonly">
                        </div>
                        <div class="col-md-2">
                            <span><b>Apellidos</b></span>
                            <input id="apellido_cliente" name="apellido_cliente" type="text" class="form-control input-sm" placeholder="Apellidos" readonly="readonly">
                        </div>
                        <div class="col-md-2">
                            <span><b>C.I.</b></span>
                            <input id="ci_cliente" name="ci_cliente" type="text" class="form-control input-sm" placeholder="C.I." readonly="readonly">
                        </div>
                        <div class="col-md-2">
                            <span><b>RUC</b></span>
                            <input id="ruc_cliente" name="ruc_cliente" type="text" class="form-control input-sm" placeholder="RUC" readonly="readonly">
                        </div>
                        <div class="col-md-1">
                            <a href="javascript:window.open('../clientes/index.html','','toolbar=yes');void 0" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-plus"></span></a>                            
                        </div>
                    </div>
                    
                </form>

                <div id="detalle" hidden="">
                    <table class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th class="centrado" style="background: #fff">Id</th>
                                <th class="centrado" style="background: #fff">Cantidad</th>
                                <th class="centrado" style="background: #fff">Detalle</th>
                                <th class="centrado" style="background: #fff">Ubicación</th>
                                <th class="centrado" style="background: #fff">Sector</th>
                                <th class="centrado" style="background: #fff">Ancho</th>
                                <th class="centrado" style="background: #fff">Alto</th>
                                <th class="centrado" style="background: #fff">MM</th>
                                <th class="centrado" style="background: #fff">Color</th>
                                <th class="centrado" style="background: #fff">M2</th>
                                <th class="centrado" style="background: #fff">Total</th>
                                <th class="centrado" style="background: #fff"><button onclick="agregarLinea()" type="button" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-plus"></span></button></th>
                            </tr>
                        </thead>
                        <tbody id="contenidoDetalle" style="background: #fff">
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="panel-footer centrado">
                <button id="botonImprimirP" type="button" class="btn btn-primary btn-sm">Imprimir Nota</button>
                <button id="botonAgregar" type="button" class="btn btn-primary btn-sm">Agregar</button>
                <button id="botonModificar" type="button" class="btn btn-primary btn-sm">Modificar</button>
                <button id="BotonEliminar" type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#confirmarEliminar">Eliminar</button>
                <button id="botonSalir" type="button" class="btn btn-primary btn-sm">Salir</button>
            </div>
        </div>
        <div id="mensajes" class="well well-sm centrado">Mensaje del Sistema.</div>
        <div class="modal fade" id="confirmarEliminar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header centrado">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabel">Mensaje del Sistema</h4>
                    </div>
                    <div class="modal-body">
                        Está seguro de eliminar estos datos?
                    </div>
                    <div class="modal-footer centrado">
                        <button id="botonEliminarAlert" type="button" class="btn btn-primary btn-sm">Eliminar</button>
                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="confirmarEliminarLinea" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header  centrado">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabelLinea">Mensaje del Sistema</h4>
                    </div>
                    <div class="modal-body">
                        Está seguro de eliminar esta linea?
                    </div>
                    <div class="modal-footer centrado">
                        <button id="botonEliminarAlertLinea" type="button" class="btn btn-primary btn-sm">Eliminar</button>
                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

        <script src="../../../js/jquery.min.js" type="text/javascript"></script>
        <script src="../../../js/bootstrap.min.js" type="text/javascript"></script>
        <script src="js/funciones.js" type="text/javascript"></script>
        <script src="../../../js/funciones.js" type="text/javascript"></script>
        <script>
                                    //verificarSesion(true);
                                    $("#buscar").css("display", "none");
                                    $("#id_presupuesto").focus();
                                    $("#panelLinea").css("display", "none");
                                    $("#panelLinea1").css("display", "none");
                                    //siguientecampo("#id_presupuesto", "#nombre_presupuesto", false);
                                    //siguientecampo("#id_color", "#cantidad_presupuestodetalle", false);

                                    if ($("#id_presupuesto").val() === "0") {
                                        siguienteCampo("#id_cliente", "#botonAgregar", false);

                                    } else {
                                        siguienteCampo("#id_cliente", "#botonModificar", false);
                                    }

                                    $("#id_presupuesto").focusout(function (event) {
                                        if ($("#id_presupuesto").val() === "") {
                                            $("#id_presupuesto").val("0");
                                        }
                                        buscarIdPresupuesto();
                                        var id = $("#id_presupuesto").val();
                                        $("#id _presupuesto").val("0");
                                        var img = "<img src='../../../img/login/" + id + ".jpg' alt=''>";
                                        $("#foto").html(img);
                                    });

                                    $("#botonBuscarIdPresupuesto").on('click', function () {
                                        $("#buscar").load("buscar.html");
                                        $("#buscar").fadeIn("slow");
                                        $("#panelPrograma").fadeOut("slow");
                                    });

                                    $("#id_cliente").focusout(function (event) {
                                        if ($("#id_cliente").val() === "") {
                                            $("#id_cliente").val("0");
                                        }
                                        buscarIdCliente();
                                    });

                                    $("#id_ubicacion").focusout(function (event) {
                                        if ($("#id_ubicacion").val() === "") {
                                            $("#id_ubicacion").val("0");
                                        }
                                        buscarIdUbicacion();
                                    });

                                    $("#id_sector").focusout(function (event) {
                                        if ($("#id_sector").val() === "") {
                                            $("#id_sector").val("0");
                                        }
                                        buscarIdSector();
                                    });

                                    $("#id_color").focusout(function (event) {
                                        if ($("#id_color").val() === "") {
                                            $("#id_color").val("0");
                                        }
                                        buscarIdColor();
                                    });
                                    $("#botonBuscarIdColor").on('click', function () {
                                        $("#buscar").load("buscarColor.html");
                                        $("#buscar").fadeIn("slow");
                                        $("#panelPrograma").fadeOut("slow");
                                    });

                                    $("#botonBuscarIdCliente").on('click', function () {
                                        $("#buscar").load("buscarCliente.html");
                                        $("#buscar").fadeIn("slow");
                                        $("#panelPrograma").fadeOut("slow");
                                    });

                                    $("#botonBuscarIdUbicacion").on('click', function () {
                                        $("#buscar").load("buscarUbicacion.html");
                                        $("#buscar").fadeIn("slow");
                                        $("#panelPrograma").fadeOut("slow");
                                    });

                                    $("#botonBuscarIdSector").on('click', function () {
                                        $("#buscar").load("buscarSector.html");
                                        $("#buscar").fadeIn("slow");
                                        $("#panelPrograma").fadeOut("slow");
                                    });

                                    $("#botonAgregar").on('click', function () {
                                        if (validarFormulario()) {
                                            agregarPresupuesto();
                                        }
                                    });
                                    $("#botonModificar").on('click', function () {
                                        if (validarFormulario()) {
                                            modificarPresupuesto();
                                        }
                                    });
                                    $("#botonEliminarAlert").on('click', function () {
                                        eliminarPresupuesto();
                                        $('#confirmarEliminar').modal('hide');
                                    });
                                    $("#botonSalir").on('click', function () {
                                        location.href = "../../../menu.html";
                                    });
                                    $("#botonAgregarLinea").on('click', function () {
                                        if (validarFormularioDetalle()) {
                                            agregarPresupuesto_Detalle();
                                        }

                                    });
                                    $("#botonModificarLinea").on('click', function () {
                                        if (validarFormularioDetalle()) {
                                            modificarPresupuesto_Detalle();
                                        }
                                    });
                                    $("#botonEliminarAlertLinea").on('click', function () {
                                        eliminarPresupuesto_Detalle();
                                        $('#confirmarEliminarLinea').modal('hide');
                                    });
                                    $("#botonSalirLinea").on('click', function () {
                                        $("#panelLinea").fadeOut("slow");
                                        $("#panelPrograma").fadeIn("slow");
                                    });
                                    //SUBDETALLES
                                    $("#botonAgregarLinea1").on('click', function () {
                                        if (validarFormularioSubDetalle()) {
                                            agregarPresupuesto_SubDetalle();
                                        }
                                    });
                                    $("#botonModificarLinea1").on('click', function () {
                                        if (validarFormularioSubDetalle()) {
                                            modificarPresupuesto_SubDetalle();
                                        }
                                    });
                                    $("#botonEliminarAlertLinea1").on('click', function () {
                                        eliminarPresupuesto_SubDetalle();
                                        $('#confirmarEliminarLinea1').modal('hide');
                                    });
                                    $("#botonSalirLinea1").on('click', function () {
                                        $("#panelLinea1").fadeOut("slow");
                                        $("#panelLinea").fadeIn("slow");
                                    });

                                    function getGET()
                                    {
                                        var loc = document.location.href;

                                        if (loc.indexOf('?') > 0)
                                        {

                                            var getString = loc.split('?')[1];

                                            var GET = getString.split('&');
                                            var get = {};


                                            for (var i = 0, l = GET.length; i < l; i++) {
                                                var tmp = GET[i].split('=');
                                                get[tmp[0]] = unescape(decodeURI(tmp[1]));
                                            }
                                            return get;
                                        }
                                    }
                                    var valores = getGET();
                                    if (valores)
                                    {
                                        for (var index in valores)
                                        {
                                            $("#ancho_presupuestodetalle1").val(valores[index]);
                                            $("#alto_presupuestodetalle1").val(valores[index]);
                                            $("#m2_presupuestodetalle1").val(valores[index]);
                                            $("#m2_presupuestodetalle1").val(valores[index]);
                                            $("#precio_presupuestodetalle1").val(valores[index]);
                                        }
                                        buscarIdPresupuesto_Detalle();
                                    } else {
                                    }
                                    
                                     $("#botonImprimirP").on('click', function () {
                                        //var l = $("#listado").val();
                                        var d = $("#id_presupuesto").val();
                                        //var h = $("#hasta_id").val();
                                        var jsp = "jsp/presupuestos.jsp";
                                        window.open(jsp + "?&d=" + d );
                                    });
        </script>
    </body>
</html>
